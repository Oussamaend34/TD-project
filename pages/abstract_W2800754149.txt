A measurement of $$J/\psi $$ J / ψ and $$\psi (2\mathrm {S})$$ ψ ( 2 S ) production is presented. It is based on a data sample from Pb+Pb collisions at $$\sqrt{s_{\mathrm {NN}}} = 5.02~\mathrm {TeV}$$ s NN = 5.02 TeV and pp collisions at $$\sqrt{s} = 5.02~\mathrm {TeV}$$ s = 5.02 TeV recorded by the ATLAS detector at the LHC in 2015, corresponding to an integrated luminosity of $$0.42~\mathrm {nb}^{-1}$$ 0.42 nb - 1 and $$25~\mathrm {pb}^{-1}$$ 25 pb - 1 in Pb+Pb and pp, respectively. The measurements of per-event yields, nuclear modification factors, and non-prompt fractions are performed in the dimuon decay channel for $$9< p_{T}^{\mu \mu } < 40$$ 9 < p T μ μ < 40 GeV in dimuon transverse momentum, and $$-2< y_{\mu \mu } < 2$$ - 2 < y μ μ < 2 in rapidity. Strong suppression is found in Pb+Pb collisions for both prompt and non-prompt $$J/\psi $$ J / ψ , increasing with event centrality. The suppression of prompt $$\psi (2\mathrm {S})$$ ψ ( 2 S ) is observed to be stronger than that of $$J/\psi $$ J / ψ , while the suppression of non-prompt $$\psi (2\mathrm {S})$$ ψ ( 2 S ) is equal to that of the non-prompt $$J/\psi $$ J / ψ within uncertainties, consistent with the expectation that both arise from b-quarks propagating through the medium. Despite prompt and non-prompt $$J/\psi $$ J / ψ arising from different mechanisms, the dependence of their nuclear modification factors on centrality is found to be quite similar.